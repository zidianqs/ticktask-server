## 源码安装luarocks

#### ./configure

```
mkdir -p "build"
rm -f src/luarocks/core/hardcoded.lua
echo "#!/bin/sh" > luarocks
echo "unset LUA_PATH LUA_PATH_5_2 LUA_PATH_5_3 LUA_PATH_5_4" >> luarocks
echo 'LUAROCKS_SYSCONFDIR="/usr/local/etc/luarocks" LUA_PATH="/Users/q/Desktop/luarocks-3.0.2/src/?.lua;;" exec "/usr/local/bin/luajit" "/Users/q/Desktop/luarocks-3.0.2/src/bin/luarocks" --project-tree="/Users/q/Desktop/luarocks-3.0.2/lua_modules" "$@"' >> luarocks
chmod +rx ./luarocks
./luarocks init
Initializing project luarocks-3.0.2 ...
Checking your Lua installation ...
Adding entries to .gitignore ...
Preparing ./.luarocks/ ...
Preparing ./lua_modules/ ...
./luarocks already exists. Not overwriting it!
Preparing ./lua for version 5.1...
cp ./build/config-5.1.lua .luarocks/config-5.1.lua
rm -f src/luarocks/core/hardcoded.lua
echo "#!/bin/sh" > luarocks-admin
echo "unset LUA_PATH LUA_PATH_5_2 LUA_PATH_5_3 LUA_PATH_5_4" >> luarocks-admin
echo 'LUAROCKS_SYSCONFDIR="/usr/local/etc/luarocks" LUA_PATH="/Users/q/Desktop/luarocks-3.0.2/src/?.lua;;" exec "/usr/local/bin/luajit" "/Users/q/Desktop/luarocks-3.0.2/src/bin/luarocks-admin" --project-tree="/Users/q/Desktop/luarocks-3.0.2/lua_modules" "$@"' >> luarocks-admin
chmod +rx ./luarocks-admin
mkdir -p "build"
(printf '#!/usr/local/bin/luajit\n'\
	'package.loaded["luarocks.core.hardcoded"] = { '\
	"$([ -n "" ] && printf 'FORCE_CONFIG = true, ')"\
	'SYSCONFDIR = [[/usr/local/etc/luarocks]] }\n'\
	'package.path=[[/usr/local/share/lua/5.1/?.lua;]] .. package.path\n'; \
	tail -n +2 src/bin/luarocks \
	)> "build/luarocks"
mkdir -p "build"
(printf '#!/usr/local/bin/luajit\n'\
	'package.loaded["luarocks.core.hardcoded"] = { '\
	"$([ -n "" ] && printf 'FORCE_CONFIG = true, ')"\
	'SYSCONFDIR = [[/usr/local/etc/luarocks]] }\n'\
	'package.path=[[/usr/local/share/lua/5.1/?.lua;]] .. package.path\n'; \
	tail -n +2 src/bin/luarocks-admin \
	)> "build/luarocks-admin"
```

### make install

mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//loader.lua" "/usr/local/share/lua/5.1/luarocks//loader.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/init.lua" "/usr/local/share/lua/5.1/luarocks//cmd/init.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/install.lua" "/usr/local/share/lua/5.1/luarocks//cmd/install.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/make.lua" "/usr/local/share/lua/5.1/luarocks//cmd/make.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/download.lua" "/usr/local/share/lua/5.1/luarocks//cmd/download.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/new_version.lua" "/usr/local/share/lua/5.1/luarocks//cmd/new_version.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/doc.lua" "/usr/local/share/lua/5.1/luarocks//cmd/doc.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/build.lua" "/usr/local/share/lua/5.1/luarocks//cmd/build.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/unpack.lua" "/usr/local/share/lua/5.1/luarocks//cmd/unpack.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/show.lua" "/usr/local/share/lua/5.1/luarocks//cmd/show.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/path.lua" "/usr/local/share/lua/5.1/luarocks//cmd/path.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/list.lua" "/usr/local/share/lua/5.1/luarocks//cmd/list.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/config.lua" "/usr/local/share/lua/5.1/luarocks//cmd/config.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/search.lua" "/usr/local/share/lua/5.1/luarocks//cmd/search.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/write_rockspec.lua" "/usr/local/share/lua/5.1/luarocks//cmd/write_rockspec.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/test.lua" "/usr/local/share/lua/5.1/luarocks//cmd/test.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/help.lua" "/usr/local/share/lua/5.1/luarocks//cmd/help.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/upload.lua" "/usr/local/share/lua/5.1/luarocks//cmd/upload.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/remove.lua" "/usr/local/share/lua/5.1/luarocks//cmd/remove.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/pack.lua" "/usr/local/share/lua/5.1/luarocks//cmd/pack.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/which.lua" "/usr/local/share/lua/5.1/luarocks//cmd/which.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/purge.lua" "/usr/local/share/lua/5.1/luarocks//cmd/purge.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//cmd"
install -m 644 "src/luarocks//cmd/lint.lua" "/usr/local/share/lua/5.1/luarocks//cmd/lint.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//rockspecs.lua" "/usr/local/share/lua/5.1/luarocks//rockspecs.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//tools"
install -m 644 "src/luarocks//tools/zip.lua" "/usr/local/share/lua/5.1/luarocks//tools/zip.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//tools"
install -m 644 "src/luarocks//tools/tar.lua" "/usr/local/share/lua/5.1/luarocks//tools/tar.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//tools"
install -m 644 "src/luarocks//tools/patch.lua" "/usr/local/share/lua/5.1/luarocks//tools/patch.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//download.lua" "/usr/local/share/lua/5.1/luarocks//download.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//core"
install -m 644 "src/luarocks//core/manif.lua" "/usr/local/share/lua/5.1/luarocks//core/manif.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//core"
install -m 644 "src/luarocks//core/dir.lua" "/usr/local/share/lua/5.1/luarocks//core/dir.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//core"
install -m 644 "src/luarocks//core/path.lua" "/usr/local/share/lua/5.1/luarocks//core/path.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//core"
install -m 644 "src/luarocks//core/vers.lua" "/usr/local/share/lua/5.1/luarocks//core/vers.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//core"
install -m 644 "src/luarocks//core/cfg.lua" "/usr/local/share/lua/5.1/luarocks//core/cfg.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//core"
install -m 644 "src/luarocks//core/util.lua" "/usr/local/share/lua/5.1/luarocks//core/util.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//core"
install -m 644 "src/luarocks//core/persist.lua" "/usr/local/share/lua/5.1/luarocks//core/persist.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//deps.lua" "/usr/local/share/lua/5.1/luarocks//deps.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//test"
install -m 644 "src/luarocks//test/busted.lua" "/usr/local/share/lua/5.1/luarocks//test/busted.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//test"
install -m 644 "src/luarocks//test/command.lua" "/usr/local/share/lua/5.1/luarocks//test/command.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//fun.lua" "/usr/local/share/lua/5.1/luarocks//fun.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//results.lua" "/usr/local/share/lua/5.1/luarocks//results.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//build.lua" "/usr/local/share/lua/5.1/luarocks//build.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//manif.lua" "/usr/local/share/lua/5.1/luarocks//manif.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//repos.lua" "/usr/local/share/lua/5.1/luarocks//repos.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//dir.lua" "/usr/local/share/lua/5.1/luarocks//dir.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//admin/cmd"
install -m 644 "src/luarocks//admin/cmd/add.lua" "/usr/local/share/lua/5.1/luarocks//admin/cmd/add.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//admin/cmd"
install -m 644 "src/luarocks//admin/cmd/refresh_cache.lua" "/usr/local/share/lua/5.1/luarocks//admin/cmd/refresh_cache.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//admin/cmd"
install -m 644 "src/luarocks//admin/cmd/remove.lua" "/usr/local/share/lua/5.1/luarocks//admin/cmd/remove.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//admin/cmd"
install -m 644 "src/luarocks//admin/cmd/make_manifest.lua" "/usr/local/share/lua/5.1/luarocks//admin/cmd/make_manifest.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//admin"
install -m 644 "src/luarocks//admin/index.lua" "/usr/local/share/lua/5.1/luarocks//admin/index.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//admin"
install -m 644 "src/luarocks//admin/cache.lua" "/usr/local/share/lua/5.1/luarocks//admin/cache.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//queries.lua" "/usr/local/share/lua/5.1/luarocks//queries.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//require.lua" "/usr/local/share/lua/5.1/luarocks//require.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//path.lua" "/usr/local/share/lua/5.1/luarocks//path.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//fs.lua" "/usr/local/share/lua/5.1/luarocks//fs.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//search.lua" "/usr/local/share/lua/5.1/luarocks//search.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//test.lua" "/usr/local/share/lua/5.1/luarocks//test.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fetch"
install -m 644 "src/luarocks//fetch/git_http.lua" "/usr/local/share/lua/5.1/luarocks//fetch/git_http.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fetch"
install -m 644 "src/luarocks//fetch/svn.lua" "/usr/local/share/lua/5.1/luarocks//fetch/svn.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fetch"
install -m 644 "src/luarocks//fetch/hg_ssh.lua" "/usr/local/share/lua/5.1/luarocks//fetch/hg_ssh.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fetch"
install -m 644 "src/luarocks//fetch/git.lua" "/usr/local/share/lua/5.1/luarocks//fetch/git.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fetch"
install -m 644 "src/luarocks//fetch/git_https.lua" "/usr/local/share/lua/5.1/luarocks//fetch/git_https.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fetch"
install -m 644 "src/luarocks//fetch/git_file.lua" "/usr/local/share/lua/5.1/luarocks//fetch/git_file.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fetch"
install -m 644 "src/luarocks//fetch/git_ssh.lua" "/usr/local/share/lua/5.1/luarocks//fetch/git_ssh.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fetch"
install -m 644 "src/luarocks//fetch/cvs.lua" "/usr/local/share/lua/5.1/luarocks//fetch/cvs.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fetch"
install -m 644 "src/luarocks//fetch/sscm.lua" "/usr/local/share/lua/5.1/luarocks//fetch/sscm.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fetch"
install -m 644 "src/luarocks//fetch/hg_http.lua" "/usr/local/share/lua/5.1/luarocks//fetch/hg_http.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fetch"
install -m 644 "src/luarocks//fetch/hg_https.lua" "/usr/local/share/lua/5.1/luarocks//fetch/hg_https.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fetch"
install -m 644 "src/luarocks//fetch/hg.lua" "/usr/local/share/lua/5.1/luarocks//fetch/hg.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//type"
install -m 644 "src/luarocks//type/manifest.lua" "/usr/local/share/lua/5.1/luarocks//type/manifest.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//type"
install -m 644 "src/luarocks//type/rockspec.lua" "/usr/local/share/lua/5.1/luarocks//type/rockspec.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//fetch.lua" "/usr/local/share/lua/5.1/luarocks//fetch.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//cmd.lua" "/usr/local/share/lua/5.1/luarocks//cmd.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//remove.lua" "/usr/local/share/lua/5.1/luarocks//remove.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//type_check.lua" "/usr/local/share/lua/5.1/luarocks//type_check.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//pack.lua" "/usr/local/share/lua/5.1/luarocks//pack.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//util.lua" "/usr/local/share/lua/5.1/luarocks//util.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//build"
install -m 644 "src/luarocks//build/builtin.lua" "/usr/local/share/lua/5.1/luarocks//build/builtin.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//build"
install -m 644 "src/luarocks//build/make.lua" "/usr/local/share/lua/5.1/luarocks//build/make.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//build"
install -m 644 "src/luarocks//build/cmake.lua" "/usr/local/share/lua/5.1/luarocks//build/cmake.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//build"
install -m 644 "src/luarocks//build/command.lua" "/usr/local/share/lua/5.1/luarocks//build/command.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fs"
install -m 644 "src/luarocks//fs/lua.lua" "/usr/local/share/lua/5.1/luarocks//fs/lua.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fs"
install -m 644 "src/luarocks//fs/tools.lua" "/usr/local/share/lua/5.1/luarocks//fs/tools.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fs"
install -m 644 "src/luarocks//fs/unix.lua" "/usr/local/share/lua/5.1/luarocks//fs/unix.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fs/unix"
install -m 644 "src/luarocks//fs/unix/tools.lua" "/usr/local/share/lua/5.1/luarocks//fs/unix/tools.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fs"
install -m 644 "src/luarocks//fs/win32.lua" "/usr/local/share/lua/5.1/luarocks//fs/win32.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fs/win32"
install -m 644 "src/luarocks//fs/win32/tools.lua" "/usr/local/share/lua/5.1/luarocks//fs/win32/tools.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//fs/win32"
install -m 644 "src/luarocks//fs/win32/pe-parser.lua" "/usr/local/share/lua/5.1/luarocks//fs/win32/pe-parser.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//manif"
install -m 644 "src/luarocks//manif/writer.lua" "/usr/local/share/lua/5.1/luarocks//manif/writer.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks/"
install -m 644 "src/luarocks//persist.lua" "/usr/local/share/lua/5.1/luarocks//persist.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//upload"
install -m 644 "src/luarocks//upload/multipart.lua" "/usr/local/share/lua/5.1/luarocks//upload/multipart.lua"
mkdir -p "/usr/local/share/lua/5.1/luarocks//upload"
install -m 644 "src/luarocks//upload/api.lua" "/usr/local/share/lua/5.1/luarocks//upload/api.lua"